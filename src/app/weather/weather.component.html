<!-- api docs -> https://www.weatherapi.com/docs/ -->

<div
  *ngIf="!weatherData"
  class="flex flex-col justify-center items-center h-screen bg-platinum"
>
  <section class="text-center">
    <h1 class="text-4xl mb-3">Weather App</h1>
    <h2 class="mb-5 text-xl">
      Get the current weather and weather forecasts for the next 2 days.
    </h2>
  </section>

  <form class="flex" *ngIf="!weatherData" (ngSubmit)="getWeather()">
    <input
      type="text"
      name="city"
      [(ngModel)]="city"
      class="border p-5 m-4 rounded-xl"
      placeholder="Type a city..."
    />
    <button type="submit" class="outline-none">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
        />
      </svg>
    </button>
  </form>
  <div *ngIf="error">
    <div class="bg-red-500 p-3 md:p-5 m-3 md:m-5 border rounded-xl text-xl">
      {{ error.message }} Try again
    </div>
  </div>
</div>

<div
  *ngIf="weatherData"
  class="h-full xl:h-screen xl:p-32 p-10 flex flex-col xl:flex-row bg-platinum"
>
  <div
    class="xl:w-3/4 w-full p-4 bg-slate-50 border xl:rounded-s-xl max-xl:rounded-t-xl"
  >
    <form
      (ngSubmit)="getWeather()"
      class="flex justify-center xl:justify-start"
    >
      <input
        type="text"
        name="city"
        [(ngModel)]="city"
        placeholder="Type a city..."
        class="border rounded-xl p-2 m-4"
      />
      <button type="submit">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
          />
        </svg>
      </button>
    </form>

    <h1 class="text-2xl font-bold flex justify-center">
      {{ weatherData.location.name }}, {{ weatherData.location.country }}
    </h1>
    <h2 class="text-2xl font-bold flex justify-center">
      {{ weatherData.location.localtime | date : "EEEE, MMMM d" }}
    </h2>

    <div class="flex justify-center items-center py-14 gap-3">
      <section>
        <img
          [src]="weatherData.current.condition.icon"
          [alt]="weatherData.current.condition.text"
        />
      </section>

      <div class="flex flex-col items-center">
        <h2 class="xl:text-9xl text-5xl text-dim_gray">
          {{ weatherData.current.temp_c }}째
        </h2>
        <h2 class="xl:text-5xl text-2xl text-dim_gray">
          {{ weatherData.current.condition.text }}
        </h2>
      </div>

      <section class="flex flex-col">
        <span class="flex items-center gap-3">
          <svg
            width="25px"
            height="25px"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.25 5.5C6.25 3.70508 7.70507 2.25 9.5 2.25C11.2949 2.25 12.75 3.70507 12.75 5.5C12.75 7.29493 11.2949 8.75 9.5 8.75H3C2.58579 8.75 2.25 8.41421 2.25 8C2.25 7.58579 2.58579 7.25 3 7.25H9.5C10.4665 7.25 11.25 6.4665 11.25 5.5C11.25 4.5335 10.4665 3.75 9.5 3.75C8.5335 3.75 7.75 4.5335 7.75 5.5V5.85714C7.75 6.27136 7.41421 6.60714 7 6.60714C6.58579 6.60714 6.25 6.27136 6.25 5.85714V5.5ZM14.25 7.5C14.25 5.15279 16.1528 3.25 18.5 3.25C20.8472 3.25 22.75 5.15279 22.75 7.5C22.75 9.84721 20.8472 11.75 18.5 11.75H2C1.58579 11.75 1.25 11.4142 1.25 11C1.25 10.5858 1.58579 10.25 2 10.25H18.5C20.0188 10.25 21.25 9.01878 21.25 7.5C21.25 5.98122 20.0188 4.75 18.5 4.75C16.9812 4.75 15.75 5.98122 15.75 7.5V8C15.75 8.41421 15.4142 8.75 15 8.75C14.5858 8.75 14.25 8.41421 14.25 8V7.5ZM3.25 14C3.25 13.5858 3.58579 13.25 4 13.25H18.5C20.8472 13.25 22.75 15.1528 22.75 17.5C22.75 19.8472 20.8472 21.75 18.5 21.75C16.1528 21.75 14.25 19.8472 14.25 17.5V17C14.25 16.5858 14.5858 16.25 15 16.25C15.4142 16.25 15.75 16.5858 15.75 17V17.5C15.75 19.0188 16.9812 20.25 18.5 20.25C20.0188 20.25 21.25 19.0188 21.25 17.5C21.25 15.9812 20.0188 14.75 18.5 14.75H4C3.58579 14.75 3.25 14.4142 3.25 14Z"
              fill="#1C274C"
            />
          </svg>
          <p class="text-dim_gray text-2xl">
            {{ weatherData.current.wind_kph }} kph
          </p>
        </span>

        <span class="flex items-center gap-3">
          <svg
            fill="#000000"
            height="25px"
            width="25px"
            version="1.1"
            id="Layer_1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 512.053 512.053"
            xml:space="preserve"
          >
            <g>
              <g>
                <g>
                  <path
                    d="M261.36,437.387C202.48,437.28,154.8,389.6,154.693,330.72c0-5.867-4.8-10.667-10.667-10.667
				c-5.867,0-10.667,4.8-10.667,10.667c0.107,70.613,57.387,127.893,128,128c5.867,0,10.667-4.8,10.667-10.667
				C272.027,442.187,267.227,437.387,261.36,437.387z"
                  />
                  <path
                    d="M263.387,3.04c-4.16-4.053-10.773-4.053-14.827,0C241.733,9.76,80.027,169.333,80.027,332.213
				c0,99.2,78.933,179.84,176,179.84s176-80.64,176-179.84C432.027,168.373,270.32,9.76,263.387,3.04z M256.027,490.72
				c-85.333,0-154.667-71.147-154.667-158.507c0-134.613,122.88-272.747,154.667-306.24
				c31.787,33.387,154.667,170.88,154.667,306.24C410.693,419.573,341.253,490.72,256.027,490.72z"
                  />
                </g>
              </g>
            </g>
          </svg>
          <p class="text-dim_gray text-2xl">
            {{ weatherData.current.humidity }} %
          </p>
        </span>
      </section>
    </div>

    <div class="flex justify-center gap-3 xl:gap-5">
      <div
        *ngFor="let forecast of weatherData.forecast.forecastday"
        class="border rounded-xl flex flex-col items-center text-center p-5"
      >
        <p>{{ forecast.date | date : "EEEE" }}</p>
        <p>{{ forecast.day.maxtemp_c }} 째C</p>
        <p>{{ forecast.day.mintemp_c }} 째C</p>
        <img
          [src]="forecast.day.condition.icon"
          [alt]="forecast.day.condition.text"
        />
      </div>
    </div>

    <p>
      Last updated at:
      {{ weatherData.current.last_updated | date : "HH:mm" }} LT
    </p>
  </div>

  <div
    class="xl:w-1/4 w-full bg-seasalt xl:rounded-e-xl max-xl:rounded-b-xl text-center"
  >
    <section class="mt-12">
      <h2 class="text-3xl text-dim_gray">Hourly Forecast</h2>
      <div class="grid xl:grid-cols-2 grid-cols-3 gap-5 m-10">
        <ng-container *ngFor="let hour of forecastHours; let i = index">
          <div
            class="border rounded-xl p-3 flex flex-col items-center"
            *ngIf="i < 6"
          >
            <p class="xl:text-xl">{{ hour.time }}</p>
            <img
              style="width: 70px"
              [src]="hour.condition.icon"
              [alt]="hour.condition.text"
            />
            <p class="xl:text-xl">{{ hour.temp_c }} 째C</p>
          </div>
        </ng-container>
      </div>
    </section>
  </div>
</div>
